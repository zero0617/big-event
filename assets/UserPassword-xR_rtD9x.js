import{_ as S}from"./PageContainer-I8IiUcI9.js";import{a as V,r as m,u as k,o as x,c as y,b as t,d as e,f as _,bX as U,E as B}from"./index-C1WUM8Jt.js";import{a as h,E as R}from"./el-col-CZbfN4jF.js";import{E as C,a as F}from"./el-form-item-DdzK9npo.js";import{E as N,a as T}from"./_plugin-vue_export-helper-CSHEANhK.js";import{E as q}from"./el-overlay-BBXLKL9-.js";import"./el-message-CKx2G1nz.js";import"./castArray-CqmUnHIH.js";const H={__name:"UserPassword",setup($){const d=V(),n=m(),i=k(),o=m({old_pwd:"",new_pwd:"",re_pwd:""}),w={old_pwd:[{required:!0,message:"请输入密码",trigger:"blur"},{pattern:/^\S{6,15}$/,message:"密码长度必须是6-15位的非空字符串",trigger:"blur"}],new_pwd:[{required:!0,message:"请输入新密码",trigger:"blur"},{pattern:/^\S{6,15}$/,message:"密码长度必须是6-15位的非空字符串",trigger:"blur"},{validator:(u,r,l)=>{r===o.value.old_pwd?l(new Error("原密码和新密码不能一样!")):l()},trigger:"blur"}],re_pwd:[{required:!0,message:"请再次确认新密码",trigger:"blur"},{pattern:/^\S{6,15}$/,message:"密码长度必须是6-15位的非空字符串",trigger:"blur"},{validator:(u,r,l)=>{r!==o.value.new_pwd?l(new Error("新密码和确认再次输入的新密码不一样!")):l()},trigger:"blur"}]},c=async()=>{await n.value.validate()&&(await q.confirm("是否修改密码？","温馨提示",{type:"wraning",confirmButtonText:"确认",cancelBottonText:"取消"}),await U(o.value),B.success("修改成功"),d.setToken(""),d.setUer({}),i.push("/login"))},f=()=>{n.value.resetFields()};return(u,r)=>{const l=N,s=C,p=T,g=F,v=h,E=R,b=S;return x(),y(b,{title:"重置密码"},{default:t(()=>[e(E,null,{default:t(()=>[e(v,{span:12},{default:t(()=>[e(g,{model:o.value,rules:w,ref_key:"formRef",ref:n,"label-width":"100px",size:"large"},{default:t(()=>[e(s,{label:"原密码",prop:"old_pwd"},{default:t(()=>[e(l,{modelValue:o.value.old_pwd,"onUpdate:modelValue":r[0]||(r[0]=a=>o.value.old_pwd=a),type:"password","show-password":""},null,8,["modelValue"])]),_:1}),e(s,{label:"新密码",prop:"new_pwd"},{default:t(()=>[e(l,{modelValue:o.value.new_pwd,"onUpdate:modelValue":r[1]||(r[1]=a=>o.value.new_pwd=a),type:"password","show-password":""},null,8,["modelValue"])]),_:1}),e(s,{label:"确认新密码",prop:"re_pwd"},{default:t(()=>[e(l,{modelValue:o.value.re_pwd,"onUpdate:modelValue":r[2]||(r[2]=a=>o.value.re_pwd=a),type:"password","show-password":""},null,8,["modelValue"])]),_:1}),e(s,null,{default:t(()=>[e(p,{onClick:c,type:"primary"},{default:t(()=>[_("修改密码")]),_:1}),e(p,{onClick:f},{default:t(()=>[_("重置")]),_:1})]),_:1})]),_:1},8,["model"])]),_:1})]),_:1})]),_:1})}}};export{H as default};
