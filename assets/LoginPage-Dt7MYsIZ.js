import{u as R,a as $,r as _,w as q,o as g,c as w,b as a,d as e,e as d,f as t,g as x,h as N,E as y,i as z,j as E,l as v,p as F,k as M}from"./index-C1WUM8Jt.js";import{E as P,a as T}from"./el-col-CZbfN4jF.js";import{E as j}from"./el-checkbox-DaAigwIX.js";import{E as A,a as D}from"./el-form-item-DdzK9npo.js";import{E as G}from"./el-link-DGRLt1rE.js";import{_ as H,E as J,a as K}from"./_plugin-vue_export-helper-CSHEANhK.js";import"./el-message-CKx2G1nz.js";import"./isEqual-BA52K4Ox.js";import"./castArray-CqmUnHIH.js";const S=i=>(F("data-v-0b6d0ecb"),i=i(),M(),i),O=S(()=>x("h1",null,"注册",-1)),Q=S(()=>x("h1",null,"登录",-1)),W={class:"flex"},X={__name:"LoginPage",setup(i){const h=R(),C=$(),u=_(!1),m=_(),o=_({username:"",password:"",repassword:""}),I=async()=>{await m.value.validate(),await N(o.value),y.success("注册成功!"),u.value=!1},U=async()=>{await m.value.validate();const{data:f}=await z(o.value);C.setToken(f.token),y.success("登录成功！"),h.push("/")},V={username:[{required:!0,message:"用户名不能为空",trigger:"blur"},{min:5,max:10,message:"用户名为5-10位",trigger:"blur"}],password:[{required:!0,message:"密码不能为空",trigger:"blur"},{pattern:/^\S{6,15}$/,message:"密码必须是6-15的非空字符",trigger:"blur"}],repassword:[{required:!0,message:"密码不能为空",trigger:"blur"},{pattern:/^\S{6,15}$/,message:"密码必须是6-15的非空字符",trigger:"blur"},{validator:(f,s,n)=>{s!==o.value.password?n(new Error("两次密码不一致")):n()},trigger:"blur"}]};return q(u,()=>{o.value={username:"",password:"",repassword:""}}),(f,s)=>{const n=T,l=A,p=J,b=K,c=G,k=D,B=j,L=P;return g(),w(L,{class:"login-page"},{default:a(()=>[e(n,{span:12,class:"bg"}),e(n,{span:6,offset:3,class:"form"},{default:a(()=>[u.value?(g(),w(k,{key:0,model:o.value,rules:V,ref_key:"form",ref:m,size:"large",autocomplete:"off"},{default:a(()=>[e(l,null,{default:a(()=>[O]),_:1}),e(l,{prop:"username"},{default:a(()=>[e(p,{modelValue:o.value.username,"onUpdate:modelValue":s[0]||(s[0]=r=>o.value.username=r),"prefix-icon":d(E),placeholder:"请输入用户名"},null,8,["modelValue","prefix-icon"])]),_:1}),e(l,{prop:"password"},{default:a(()=>[e(p,{modelValue:o.value.password,"onUpdate:modelValue":s[1]||(s[1]=r=>o.value.password=r),"prefix-icon":d(v),type:"password",placeholder:"请输入密码","show-password":""},null,8,["modelValue","prefix-icon"])]),_:1}),e(l,{prop:"repassword"},{default:a(()=>[e(p,{modelValue:o.value.repassword,"onUpdate:modelValue":s[2]||(s[2]=r=>o.value.repassword=r),"prefix-icon":d(v),type:"password",placeholder:"请输入再次密码","show-password":""},null,8,["modelValue","prefix-icon"])]),_:1}),e(l,null,{default:a(()=>[e(b,{onClick:I,class:"button",type:"primary","auto-insert-space":""},{default:a(()=>[t(" 注册 ")]),_:1})]),_:1}),e(l,{class:"flex"},{default:a(()=>[e(c,{type:"info",underline:!1,onClick:s[3]||(s[3]=r=>u.value=!1)},{default:a(()=>[t(" ← 返回 ")]),_:1})]),_:1})]),_:1},8,["model"])):(g(),w(k,{key:1,model:o.value,rules:V,ref_key:"form",ref:m,size:"large",autocomplete:"off"},{default:a(()=>[e(l,null,{default:a(()=>[Q]),_:1}),e(l,{prop:"username"},{default:a(()=>[e(p,{modelValue:o.value.username,"onUpdate:modelValue":s[4]||(s[4]=r=>o.value.username=r),"prefix-icon":d(E),placeholder:"请输入用户名"},null,8,["modelValue","prefix-icon"])]),_:1}),e(l,{prop:"password"},{default:a(()=>[e(p,{modelValue:o.value.password,"onUpdate:modelValue":s[5]||(s[5]=r=>o.value.password=r),name:"password","prefix-icon":d(v),type:"password",placeholder:"请输入密码"},null,8,["modelValue","prefix-icon"])]),_:1}),e(l,{class:"flex"},{default:a(()=>[x("div",W,[e(B,null,{default:a(()=>[t("记住我")]),_:1}),e(c,{type:"primary",underline:!1},{default:a(()=>[t("忘记密码？")]),_:1})])]),_:1}),e(l,null,{default:a(()=>[e(b,{onClick:U,class:"button",type:"primary","auto-insert-space":""},{default:a(()=>[t("登录")]),_:1})]),_:1}),e(l,{class:"flex"},{default:a(()=>[e(c,{type:"info",underline:!1,onClick:s[6]||(s[6]=r=>u.value=!0)},{default:a(()=>[t(" 注册 → ")]),_:1})]),_:1})]),_:1},8,["model"]))]),_:1})]),_:1})}}},ue=H(X,[["__scopeId","data-v-0b6d0ecb"]]);export{ue as default};
